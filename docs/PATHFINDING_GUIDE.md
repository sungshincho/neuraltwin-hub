# Customer Pathfinding System Guide

> 모든 좌표는 바닥 평면 기준 (x, z)입니다. 3D Viewer에서는 각 포인트를 [x, 0.5, z]로 변환합니다.

## 개요

이 시스템은 **30개**의 사전 정의된 고객 동선 케이스를 사용합니다. 시간대에 따라 가중치를 적용하여 랜덤하게 케이스가 선택됩니다.

## 입구 좌표

- **Entry Point**: (2, 5) → 3D: [2, 0.5, 5]

## 케이스 분류

### 신규 고객 (체크아웃 도달) - Case 1-12
- 계산대 영역(z ≤ -3)에 도달하는 경로
- 구매 고객으로 분류됨 (파란색)

### 재방문자 (기존) - Case 13-20
- 체크아웃 미도달 경로
- 보라색으로 표시됨

### 재방문자 (추가) - Case 21-30
다양한 길이의 재방문자 동선:

| Case | 유형 | 포인트 수 | 설명 |
|------|------|----------|------|
| 21 | 초단 | 9 | 입구 근처만 훑고 나감 |
| 22 | 짧음 | 15 | 왼쪽 입구 구역만 |
| 23 | 짧음 | 15 | 오른쪽 전면부만 |
| 24 | 전체순환 | 39 | 시계방향 전체 한바퀴 |
| 25 | 전체순환 | 39 | 반시계방향 전체 한바퀴 |
| 26 | 중간 | 29 | 왼쪽 전체 구역 |
| 27 | 중간 | 27 | 오른쪽 전체 구역 |
| 28 | 초단 | 11 | 잠깐 구경하고 나감 |
| 29 | 짧음 | 19 | 중앙 구역만 |
| 30 | 초단 | 7 | 입구에서 잠깐 보고 나감 |

## 시간대별 가중치

- **오전 (morning, ~12시)**: 짧은 동선/초단 동선 선호, 재방문자 위주
- **오후 (afternoon, 12~18시)**: 신규/재방문 반반, 다양한 길이
- **저녁 (evening, 18시~)**: 신규(체크아웃) 비율 높음, 전체 순환도 증가

## API 사용법

```typescript
import { generateRandomCustomerPath, pathReachesCheckout, getPathByCase, getTotalCases } from "@/lib/pathfinding";

// 시간대 기반 랜덤 경로 생성
const path = generateRandomCustomerPath("14:00-15:00");

// 특정 케이스 경로 가져오기 (1-30)
const case5Path = getPathByCase(5);

// 경로가 계산대에 도달하는지 확인 (신규 vs 재방문)
const reachedCheckout = pathReachesCheckout(path);

// 총 케이스 개수
const total = getTotalCases(); // 30
```

## 고객 분류 기준

- **신규 고객 (파란색)**: 경로가 z ≤ -3 영역(계산대)에 도달
- **재방문자 (보라색)**: 경로가 계산대에 도달하지 않음
